<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at 2014-09-11
 | Rendered using Apache Maven Stylus Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>MaPSeq - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta name="Date-Revision-yyyymmdd" content="20140911" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                </head>
  <body class="composite">
    <div id="banner">
                  <span id="bannerLeft">
                Massively Parallel Sequencing
                </span>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                                   <div class="xleft">
        Last Published: 2014-09-11
                  &nbsp;| Version: 0.5.6-SNAPSHOT
                      </div>
            <div class="xright">        
                         </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                                                   <h5>Overview</h5>
                  <ul>
                  <li class="none">
                  <a href="index.html">Home</a>
            </li>
                  <li class="none">
                  <a href="getting-started.html">Getting Started</a>
            </li>
                  <li class="none">
                  <a href="download.html">Download</a>
            </li>
          </ul>
                       <h5>Documentation</h5>
                  <ul>
                                                                                <li class="expanded">
                  <a href="manual/index.html">Manual</a>
                    <ul>
                      <li class="none">
                  <a href="manual/user-guide/index.html">User Guide</a>
            </li>
                      <li class="none">
                  <a href="manual/developer-guide/index.html">Developer Guide</a>
            </li>
              </ul>
        </li>
                                                              <li class="expanded">
                  <a href="migration/index.html">Migration</a>
                    <ul>
                      <li class="none">
                  <a href="migration/04to05.html">v0.4 to v0.5</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Pipelines</h5>
                  <ul>
                  <li class="none">
                  <a href="casava.html">CASAVA</a>
            </li>
                  <li class="none">
                  <a href="rnaseq.html">RNASeq</a>
            </li>
                  <li class="none">
                  <a href="ncgenes.html">NCGenes</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                    <li class="collapsed">
                  <a href="project-info.html">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                  <a href="project-reports.html">Project Reports</a>
                  </li>
          </ul>
                                 <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
          <img alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                       
                               </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
    <div class="section">
<h2>Deployment<a name="Deployment"></a></h2>
      
<p>At this point, the code has been written and just needs to be deployed.  Deployment of the code will be into an OSGi based container called <a class="externalLink" href="http://karaf.apache.org">Apache Karaf</a>.  The following steps walk through what will be required complete this deployment.</p>
      
<div class="section">
<h3>Karaf Features<a name="Karaf_Features"></a></h3>
	
<p>To include your code as maven dependencies to the mapseq-karaf features project, then you need to familiarize yourself with the &lt;mapseq&gt;/mapseq-karaf/src/main/resources/features.xml file and add your projects housing your code into this file.</p>
	
<p>The contents of this file break up the logic parts of MaPSeq into deployable &quot;features&quot;.  Currently, these include:</p>
	
<ul>
	  
<li>mapseq-common</li>
	  
<li>mapseq-config</li>
	  
<li>mapseq-dao</li>
	  
<li>mapseq-web-services</li>
	  
<li>mapseq-modules</li>
	  
<li>mapseq-pipelines</li>
	  
<li>mapseq-message-broker</li>
	  
<li>mapseq-messaging</li>
	  
<li>mapseq</li>
	</ul>
	
<p>Please take care when working with this file as features can depend on other features, potentially creating a dependency loop.</p>
      </div>
      
<div class="section">
<h3>Deploying your code using the Karaf features file<a name="Deploying_your_code_using_the_Karaf_features_file"></a></h3>
	
<p>Using the features provisioning mechanism is recommended way to deploy your code to Karaf.</p>
	
<ol style="list-style-type: decimal">
	  
<li><a class="externalLink" href="http://karaf.apache.org/index/community/download.html">Download</a> the latest version of Apache Karaf.</li>
	  
<li>Explode the apache-karaf-&lt;version&gt;.tar.gz into a desired location.</li>
	  
<li>Run the fixKaraf.sh shell script against your new Apache Karaf install.</li>
	  
<li>Start the Karaf container</li>
	  
<li>Add the MaPSeq features url</li>
	  
<li>Add the MaPSeq features</li>	  
	</ol>	
	
<p>The following set of commands should work on most Linux OS's:</p>
	
<div>
<pre>
$ wget http://apache.cs.utah.edu//karaf/2.2.5/apache-karaf-2.2.5.tar.gz	  
$ tar -xzf apache-karaf-2.2.5.tar.gz
$ export KARAF_HOME=./apache-karaf-2.2.5; &lt;mapseq&gt;/bin/fixKaraf.sh
$ ./apache-karaf-2.2.5/bin/karaf
karaf@root&gt; features:addurl mvn:edu.unc.mapseq/mapseq-karaf/1.0-SNAPSHOT/xml/features
karaf@root&gt; features:install mapseq
	</pre></div>
	
<p>These commands should provide you with a running Karaf container with MaPSeq fully deployed...or very close to it.</p>	
      </div>
      
<div class="section">
<h3>Deploying your code using osgi commands<a name="Deploying_your_code_using_osgi_commands"></a></h3>
	
<p>If you have new code to deploy, the previous 1 through 6 steps to deploy to Karaf are required as they also add the dependencies necessary for any additional or newly developed code.</p>	
	
<p>For instance, after writing a new module, you will need to deploy that bundle/jar to Karaf.  If you new module exists in the &lt;mapseq&gt;/mapseq-modules/mapseq-module-core project, then the following command will install it into Karaf and (&quot;-s&quot;) start the bundle.</p>
	
<div>
<pre>
karaf@root&gt; osgi:install -s mvn:edu.unc.mapseq.mapseq-modules/mapseq-module-core/1.0-SNAPSHOT
	</pre></div>
	
<p>Similarly, to deploy the entire Hello World example the following commands are used:</p>
	
<div>
<pre>
karaf@root&gt; osgi:install -s mvn:edu.unc.mapseq.mapseq-modules/mapseq-module-core/1.0-SNAPSHOT
karaf@root&gt; osgi:install -s mvn:edu.unc.mapseq.mapseq-pipelines/mapseq-pipeline-hello-world/1.0-SNAPSHOT
karaf@root&gt; osgi:install -s mvn:edu.unc.mapseq.mapseq-messaging.mapseq-message-services/mapseq-message-service-hello-world/1.0-SNAPSHOT
	</pre></div>
      </div>
      
<div class="section">
<h3>Notes<a name="Notes"></a></h3>
	
<p>See <a href="mapseq-karaf/index.html">MaPSeq Karaf</a></p>     
      </div>      
    </div>
    
<p><span id="pageNavLeft"><a href="frontToEndIntegration-step3.html"> &lt;&lt; Back</a></span><span id="pageNavRight"><a href="frontToEndIntegration-step5.html">Continue &gt;&gt;</a></span></p>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        &#169;            2014
              UNC
            
                          - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a>.
        Apache Maven, Maven, Apache, the Apache feather logo, and the Apache Maven project logos are trademarks of The Apache Software Foundation.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
